<ul>
  <li>
    추천 시스템의 정의인 여러 후보 가운데 가치있는 것을 선정해서 의사 결정을 지원하는 시스템이란 정의중 <strong>여러 후보 가운데 가치있는 아이템을 선정하는 방법</strong>에 대해 다룬다.
  </li>
  <li>
    다양한 데이터를 기반으로 사용자가 <strong>어떤 아이템을 좋아하는지 계산하는 알고리즘</strong>에 대해 알아보며 <strong>프로세스(추천설계)</strong>에 해당한다.
  </li>
  <li>
    추천 알고리즘에는 머신러닝 기반과 도메인 전문가가 만든 규칙 가반까지 다양하게 존재한다.
  </li>
</ul>

<br>

<h2>1. 추천 알고리즘 분류</h2>
<ul>
  <li>
    추천 시스템 알고리즘은 먼저 <strong>내용 기반 필터링(content-based filtering)</strong>과 <strong>협조 필터링(collaborative filtering)</strong> 두 가지로 나눌 수 있다.
  </li>
  <li>
    <strong>내용 기반 필터링</strong>은 <strong>사용자가 선호하는 정보</strong>를 기반으로 <strong>내용이 비슷한 아이템</strong>을 계산하여 추천을 수행한다.
  </li>
  <li>
    <strong>협조 필터링</strong>은 서비스 내의 다른 <strong>사용자의 과거 행동 등을</strong> 통해 얻어진 기호 경향을 활용하여 추천하는 알고리즘이다.
  </li>
  <li>
    협조 필터링은 예측을 실행하는 방법 관점에서 <strong>메모리 기반 방법(memory-based method)</strong>과 <strong>모델 기반 방법(model-based method)</strong>로 나뉜다.
  </li>
    <ul>
      <li>
        <strong>메모리 기반 방식</strong>
      </li>
        <ul>
          <li>
            추천 시스템이 사용되기 전에는 사용자의 데이터를 <strong>축적</strong>만하고 예측을 위한 계산은 수행하지 않는다.
          </li>
          <li>
            <strong>예측을 수행하는 시점</strong>에 축적된 데이터를 모두 사용해 예측을 수행한다.
          </li>
          <li>
            데이터를 <strong>메모리에 전부 저장</strong>해 계산을 수행하기에 메모리 기반 방법이라 부른다.
          </li>
        </ul>
      <li>
        <strong>모델 기반 방식</strong>
      </li>
        <ul>
          <li>
            추천 시스템을 사용하기 전에 미리 시스템에 축적된 데이터로 <strong>모델을 학습</strong>해 둔 뒤 예측 시 <strong>미리 만들어진 모델</strong>과 추천을 제공하는 <strong>대상 사용자 데이터</strong>만 사용해 계산을 수행한다.
          </li>
          <li>
            <strong>사전에 모델</strong>을 만들어 두기 때문에 모델 기반 방법이라 부른다.
          </li>
        </ul>
    </ul>
</ul>

<br>

<h1>2. 내용 기반 필터링</h1>
<h2>2-1. 개요</h2>
<ul>
  <li>
    내용 기반 필터링은 <strong>사용자 프로필(user profile)</strong>과 <strong>아이템 특징(item feature)</strong>과의 유사도를 계산하여 좋아할 만한 아이템을 사용자에게 추천한다.
  </li>
    <ul>
      <li>
        <strong>User profile</strong>: 사용자가 어떤 아이템을 좋아하는지를 나타낸다.
      </li>
      <li>
        <strong>Item feature</strong>: 아이템의 다양한 성질을 나타낸다.
      </li>
    </ul>
</ul>

<br>

<h2>2-2 아이템 특징 획득</h2>
<ul>
  <li>
    내용 기반 필터링에서 사용할 수 있는 특징을 획득하는 방법은 <strong>텍스트</strong>, <strong>이미지</strong> 그리고 <strong>소리 데이터</strong> 등 다양한다.
  </li>
  <li>
    중요한 점은 어떤 데이터이냐보다 서비스에 적합하게 데이터로 부터 <strong>어떤 특성(feature)</strong>를 뽑아내는가 이다.
  </li>
</ul>

<br>

<h2>2-3. 사용자 프로필 획득</h2>
<ul>
  <li>
    사용자의 <strong>선호도를 나타내는 사용자 프로필</strong>을 획득하는 바업은 크게 다음 두 가지이다.
  </li>
    <ul>
      <li>
        <strong>간접 지정형</strong>
      </li>
        <ul>
          <li>
            사용자의 <strong>과거 행동 이력</strong>에 기반해 사용자 프로필을 작성한다.
          </li>
        </ul>
      <li>
        <strong>직접 지정형</strong>
      </li>
        <ul>
          <li>
            사용자에게 자신이 선호하는 아이템의 특징을 <strong>명시적으로 지정</strong>하도록 한다.
          </li>
          <li>
            명시적인 지정 방식은 가입 직후 온보딩이나 마이 페이지(my page)등에서 수행하는 경우가 많다.
          </li>
        </ul>
    </ul>
</ul>

<br><br>

<h1>3. 협조 필터링</h1>
<ul>
  <li>
    협조 필터링
  </li>
    <ul>
      <li>
        메모리 기반 방법
      </li>
        <ul>
          <li>
            사용자-사용자 메모리 기반(user-user memory-based method)
          </li>
            <ul>
              <li>
                추천받을 사용자와 <strong>선호도가 비슷한 사용자</strong>를 착안하여 추천을 수행한다.
              </li>
            </ul>
          <li>
            아이템-아이템 메모리 기반(item-item memory-based method)
          </li>
            <ul>
              <li>
                추천받을 사용자가 <strong>선호하는 아이템과 비슷한 아이템</strong>을 착안하여 추천한다.
              </li>
            </ul>
        </ul>
      <li>
        모델 기반 방법
      </li>
    </ul>
  <li>
    이번 절에서는 <strong>사용자-사용자 메모리 기반 방법</strong> 협조 필터링에 초점을 맞추어 알고리즘 개요를 설명한다.
  </li>
</ul>

<br>

<h2>3-1. 메모리 기반 방법 알고리즘 개요</h2>
<ul>
  <li>
    사용자-사용자 메모리 기반 협초 필터링 알고리즘 순서
  </li>
    <ul>
      <li>
        서비스 내의 다른 사용자 중 추천을 받을 사용자와 아이템 <strong>선호도가 유사한 사용자</strong>를 찾는다.
        <br>→ 필터링된 사용자들을이 <strong>선호하는 아이템을 추출</strong>한다.
        <br>→ 추출된 아이템 내에서 <strong>현재 사용자에게 적합한 아이템을 추천</strong>한다.
      </li>
    </ul>
  <li>
    선호도가 유사한 사용자를 찾는 방법 중 하나는 현재 사용자의 <strong>구매 이력에서 아이템 선호도를 추측</strong>해 선호도 경향이 비슷한 사용자를 찾는다.
  </li>
    <ul>
      <li>
        위의 과정을 통해 현재 사용자와 유사한 사용자들을 찾을 수 있다.
      </li>
    </ul>
</ul>

<br>

<h2>3-2. 기호 데이터 획득과 평갓값 행렬</h2>
<ul>
  <li>
    사용자로부터 얻은 아이템에 대한 선호도 정보를 <strong>기호 데이터(preference data)</strong>라 부른다.
  </li>
  <li>
    기호 <strong>데이터를 획득</strong>하는 방법은 크게 두 가지가 있다.
  </li>
    <ul>
      <li>
        <strong>명시적 피드백(explicit feedback)</strong>: 사용자에게 아이템의 좋고 싫은이나 관심 여부에 관해 <strong>질문</strong>하고 <strong>답변</strong>을 받아 기호 데이터를 획득하는 방법이다.
      </li>
      <li>
        <strong>암묵적 피드백(implicit feedback)</strong>: <strong>사용자 행동 이력</strong>으로부터 아이템에 대한 <strong>관심을 추정</strong>해 기호 데이터로 간주하는 방법.
      </li>
    </ul>
  <li>  
    수집한 기호 데이터 등에 기반하여 해당 아이템의 선호도 정도를 정량적으로 나타낸 것을 <strong>평갓값(rating)</strong>이라 한다.
  </li>
    <ul>
      <li>
        평갓값을 성분으로 하는 사용자 X 아이템 행렬을 <strong>평갓값 행렬(rating matrix)</strong>이라 한다.
      </li>
    </ul>
  <li>
    전형적인 추천 시스템 문제 설정에서는 <strong>평갓값 행렬</strong>이 주어진 상태에서 대상 사용자의 특정 아이템에 대한 <strong>미지의 평갓값을 예측해 계산</strong>한다.
  </li>
  <li>
    서비스에서 예측 평갓값을 사용할 때에는 다음 두 가지 활용처가 있다.
  </li>
    <ul>
      <li>
        사용자가 열람하는 아이템의 <strong>보조 정보</strong>로 사용할 수 있다.
      </li>
      <li>
        예측 평갓값에 기반하여 <strong>정렬된 아이템 리스트</strong>를 표시하는 경우가 있다. 단, 이 경우 <strong>이미 사용자가 평가한 아이템</strong>은 포함하지 않는다.
      </li>
    </ul>
</ul>

<br>

<h2>3-3. 모델 기반 방법 알고리즘 개요</h2>
<ul>
  <li>
    예측 모델은 클러스터링을 사용하는 모델이나 회귀 문제 및 분류 문제로 평갓값을 직접 예측하는 모델, 토픽 모델(topic model), 행렬 분해(Matrix Factorization) 모델 등 다양한 모델이 존재한다.
  </li>
  <li>
    평갓값을 회귀 문제나 분류 문제로 <strong>직접 예측</strong>하는 모델에서는 사용자로부터 얻은 아이템의 <strong>평갓값 데이터를 훈련 데이터</strong>로 하여 모델을 학습하여 <strong>모르는 아이템에 대한 평갓값</strong>을 예측한다.
  </li>
  <li>
    <strong>토픽 모델</strong>을 사용하면 LDA(Latent Dirichlet Allocation) 등의 방법을 적용해 평갓값 행렬을 <strong>차원 압축</strong>함으로써 <strong>잠재적 의미를 표현하는 정보를 취득</strong>해 추천에 사용한다.
  </li>
  <li>
    행렬 분해 방법은 다음과 같은 순서로 진행된다.
  </li>
    <ul>
      <li>
        평갓값 행렬을 <strong>사용자 행렬</strong>과 <strong>아이템 행렬</strong>로 분해한다.
        <br>→ 분해된 행렬에서 얻은 사용장 벡터와 아이템 벡터의 <strong>유사도</strong>를 계산하여 임의의 아이템에 대한 <strong>예측 평갓값을 계산</strong>한다.
        <br>→ 분해로 얻은 사용자 벡터와 아이템 벡터는 <strong>다른 알고리즘</strong>에 사용할 수도 있다.
      </li>
    </ul>
</ul>

<br>

<h2>3-4. 메모리 기반 방법과 모델 기반 방법의 협조 필터링 비교</h2>
<ul>
  <li>
    메모리와 모델 두 방법을 <strong>추천에 걸리는 시간</strong>과 <strong>운용성</strong>이라는 두 가지 관점으로 살펴본다.
  </li>
  <li>
    <strong>메모리 기반 방식</strong>은 추천 시점에 모든 데이터에서 비슷한 사용자나 아이템을 찾기에 <strong>시간이 비교적 오래</strong>걸린다. 반면 <strong>모델 기반 방식</strong>은 미리 모델을 만들어두기에 <strong>시간이 올래걸지는 않는다</strong>.
  </li>
  <li>
    운용성 관점에서는 <strong>메모리 기반 방식</strong>은 추천할 때마다 모든 데이터를 사용하기에 <strong>항상 최신 데이터</strong>만을 반영할 수 있다. 반면 <strong>모델 기반 방식</strong>은 모델을 새로 만들어야 하기에 <strong>모델 업데이트 시점</strong>이나 <strong>재학습에 걸리는 계산 비용</strong> 등 운용적으로 어려운 측면이 존재한다.
  </li>
</ul>

<br><br>

<h1>4. 내용 기반 필터링과 협조 필터링 비교</h1>
<h2>4-1. 다양성 향상</h2>
<ul>
  <li>
    추천 결과에 포함된 아이템들이 서로 비슷하지 않은 것을 다양성이라 한다. 추천 결과의 <strong>다양성</strong>을 높이는 것이 목적인 경우 <strong>협조 필터링</strong>의 효과가 더 좋다.
  </li>
  <li>
    모르는 아이템의 경우 <strong>내용 기반</strong>은 <strong>사용자의 프로필</strong>, <strong>과거 행동 이력</strong> 그리고 <strong>서비스 내 과거 기호 정보</strong>가 없기에 추천에 포함이 불가하며 다양성을 증가시키기 힘들다.
  </li>
  <li>
    반면 <strong>협조 필터링</strong>은 추천을 받는 사용자가 모르는 아이템이라 하더라도 서비스 내의 <strong>다른 사용자가 평가한 이력</strong>이 있다면 해당 정보를 기반으로 추천할 수 있어 <strong>다양성</strong>이 높아진다.
  </li>
</ul>

<br>

<h2>4-2. 도메인 지식 취급 비용</h2>
<ul>
  <li>
    서비스 내 아이템이나 사용자 고유의 지식 및 콘텍스트라는 도메인 지식을 다루고 관리하는 측면에서도 <strong>협조 필터링</strong>의 비용이 낮다.
  </li>
    <ul>
      <li>
        협조 필터링은 추천받는 사용자와 과거의 기호 데이터를 기반으로 하기에 아이템 자체에 대한 정보나 사용자 자체의 속성 정보 등이 필요하지 않다.
      </li>
      <li>
        내용 기반 필터링은 사용자가 도메인 지식을 작성해야하며 도메인 관련 지식이 없다면 적합한 아이템을 추천하기 어렵다.
      </li>
    </ul>
  <li>
    물론 적절하게 도메인 지식을 활용하는 것은 적절하지만 다양한 도메인 지식을 관리하기 위한 <strong>다양한 DB 유지 및 관리</strong>와 <strong>도메인 지식 자체</strong>에 비용이 많이 든다.
  </li>
</ul>

<br>

<h2>4-3. 콜드 스타트 문제에 대한 대응</h2>
<ul>
  <li>
    협조 필터링 보다 <strong>내용 기반 필터링</strong>이 콜드 스타트 문제에 대응하기 쉽지만 사용자 프로필을 활용해야 한다는 점에서 콜드 스타트에 무조건 대응이 된다고 보기는 힘들다.
  </li>
</ul>

<br>

<h2>4-4. 사용자 수가 적은 서비스에서의 추천</h2>
<ul>
  <li>
    사용자가 적은 경우에도 인터랙션 데이터를 얻기 힘들기에 아이템의 특징이나 사용자 프로필만으로 추천이 가능한 <strong>내용 기반 필터링</strong>이 적합하다.
  </li>
</ul>

<br>

<h2>4-5. 커버리지 향상</h2>
<ul>
  <li>
    <strong>커버리지(coverage)</strong>란 서비스에 있는 모든 아이템 중 <strong>추천 시스템으로 사용자에게 추천할 수 있는 아이템의 비율</strong>을 의미한다.
  </li>
  <li>
    <strong>커버리지가 낮다면</strong> 일부 아이템이 치우쳐 추천되는 상황, 즉 추천에 <strong>편향이 발생</strong>한다. 이런 경우에도 <strong>내용 기반 필터링</strong>이 적합하다.
  </li>
    <ul>
      <li>
        협조 필터링은 사용자의 평가를 필요로 한다. 커버리지가 낮은 상태에서 몇몇 아이템이 <strong>평가가 없어 추천에서 제외</strong>된다면 오히려 커버리지가 더 낮아질 수 있기 때문이다.
      </li>
    </ul>
</ul>

<br>

<h2>4-6. 아이템 특징 활용</h2>
<ul>
  <li>
    아이템 특징을 활용하여 추천을 진행할 때에는 내용 기반 필터링을 사용하는 것이 바람직하다.
  </li>
  <li>
    협조 기반 필터링은 과거 행동 이력을 사용하기에 아이템의 특징을 반영하지 못하는 반면 <strong>내용 기반 필터링</strong>은 사용하는 데이터 자체가 <strong>아이템의 특징</strong>이기 때문이다.
  </li>
</ul>

<br>

<h2>4-7. 예측 정확도</h2>
<ul>
  <li>
    규모가 있는 서비스에서 일반적인 사용자를 대상으로 할 경우 협조 필터링 방법이 예측 정확도가 높다.
  </li>
    <ul>
      <li>
        다양한 <strong>사용자의 행동 이력</strong>을 사용하기에 내용 기반 방식보다 더 다양한 사용자 행동 이력을 활용하며 이는 <strong>복잡한 사용자 기호</strong>를 고려할 수 있다.
      </li>
      <li>
        또한 행동 이력은 시간이 지남에 따라 <strong>지속적으로 데이터가 쌓이기에</strong> 사용자가 서비스를 지속적으로 사용할 경우 <strong>예측 정확도 향상을 기대</strong>할 수 있다.
      </li>
      <li>
        사용자 프로필 뿐만 아니라 <strong>다른 사용자의 기호 데이터</strong>까지 활용할 수 있다는 점 또한 긍정적이다.
      </li>
    </ul>
</ul>

<br><br>

<h1>5. 추천 알고리즘 선택</h1>
<ul>
  <li>
    내용 기반 필터링, 협조 필터링, 하이브리드 혹은 서비스를 고려한 여러 알고리즘을 고려할 수 있다.
  </li>
  <li>
    사용자 데이터가 적은 초기에는 <strong>내용 기반 필터링으로 시작</strong>하여 사용자 데이터가 증가하는 시점에 <strong>협조 필터링으로 교체</strong>하는 전략을 사용하는 경우가 많다.
  </li>
  <li>
    <strong>제공 형태(개요 추천, 연관 아이템 추천, 알림서비스 혹은 개인화 등)</strong>에 맞게 추천 알고리즘을 선택할 수 있다.
  </li>
  <li>
    <strong>다양성 기준</strong>을 고려한 알고리즘 선택 또한 중요하다.
  </li>
</ul>

<br><br>

<h1>6. 기호 데이터의 특징</h1>
<h2>6-1. 명시적 획득과 암묵적 획득 비교</h2>
<h3>6-1-1. 데이터양</h3>
<ul>
  <li>
    <strong>암묵적 획득 방식</strong>은 사용자가 서비스를 사용하는한 지속적으로 데이터를 얻을 수 있어 더많은 데이터양을 확보할 수 있다.
  </li>
  <li>
    반명 <strong>명시적 획득 방식</strong>은 사용자가 직접적으로 기호를 알려주는 경우는 적을 뿐더러 강요의 느낌으로 받아지는 경우 부정적인 경험을 제공하기에 데이터를 얻기 힘들다.
  </li>
    <ul>
      <li>
        질문에 대한 보상을 설정하는 것도 좋지만 수많은 아이템에 대해 명시적으로 피드백을 받는 것은 애초에 어렵다.
      </li>
    </ul>
</ul>

<h3>6-1-2. 데이터 정확성</h3>
<ul>
  <li>
    <strong>암묵적 획득</strong>의 경우 사용자의 선호도가 사용자 행동 로그에 그대로 나타나는 경우가 적기에 <strong>비교적 사용자 기호 데이터를 얻기 힘들다</strong>.
  </li>
    <ul>
      <li>
        실수로 클릭한 경우와 직접 클릭하고 들어가서 봤지만 만족스럽지 않은 경우가 해당한다.
      </li>
    </ul>
  <li>
    따라서 암묵적 획득 방식을 사용할 경우 <strong>기호라고 판단할 만한 조건</strong>을 걸어 사용자 행동을 정의해야한다. (e.g. 페이지 체류 시간을 함께 검토하는 등).
  </li>
</ul>

<h3>6-1-3. 평가하지 않음과 기대하지 않음의 구별</h3>
<ul>
  <li>
    어떤 아이템에 대해 <strong>기호 데이터가 없는 상태</strong>를 <strong>평가하지 않음</strong>, 어떤 아이템에 대해 사용자가 <strong>싫어함 및 관심 없음 등 부정적인 기호 데이터</strong>를 나타낸 경우 <strong>기대하지 않음</strong>이라 한다.
  </li>
  <li>
    암묵적 획득 방식은 이번에도 평가하지 않음과 기대하지 않음을 구별하는 것이 일반적으로 어렵고 명확하지 않다.
  </li>
  <li>
    데이터 정확성 항목과 마찬가지로 사용자의 <strong>기호라 판단할만한 조건</strong>을 걸어 사용자 행동을 정의해야 한다.
  </li>
</ul>

<h3>6-1-4. 사용자 인지</h3>
<ul>
  <li>
    <strong>사용자 인지</strong>란 자신의 기호 데이터가 언제, 어떻게 시스템에 반영되어 사용되고 있는지를 아는가를 의미한다.
  </li>
    <ul>
      <li>
        사용자가 기호 데이터를 사용해 아이템을 추천할 때 사용자가 인지를 하고 있는 경우 추천을 받아들이기 쉽고 좋은 인상을 받는다 알려져 있다.
      </li>
      <li>
        단, 개인정보에 민감한 사용자가 있을 수 있으며 이경우 암묵적 데이터 활용에 불쾌감을 느낄 수 있으므로 이 경우에는 명시적 데이터를 활용하는 것이 좋다.
      </li>
    </ul>
</ul>

<br>

<h2>6-2. 기호 데이터를 다룰 때의 주의점</h2>
<h3>6-2-1. 데이터의 희바함</h3>
<ul>
  <li>
    통계적인 방식을 사용할 때에는 많은 데이터를 필요로 한다. 그러나 실제로는 평갓값 행렬의 성분인 <strong>평갓값을 얻기 어려운 경우</strong>가 많으며 <strong>데이터가 희박(sparse)</strong> 해진다.
  </li>
  <li>
    단순히 평가를 하느냐 마느냐의 문제가 아니라 <strong>아이템의 수가 너무 많아</strong> 어쩔 수 없이 평가가 이루어지지 않는 아이템들 또한 존재한다.
  </li>
  <li>
    희박한 데이터의 문제는 단순히 데이터가 없는 것을 넘어 데이터가 있는 아이템 사이에서 <strong>편향</strong>의 문제 또한 존재한다.
  </li>
  <li>
    따라서 추천 시스템을 도입할 때 <strong>데이터가 희박</strong>한 문제 등의 상황을 고려하여 알고리즘을 구성할 필요가 있다.
  </li>
</ul>

<br>

<h2>6-3. 평갓값의 변동이나 편향</h2>
<ul>
  <li>
    같은 사용자라 하더라도 <strong>시점</strong>에 따라 같은 아이템이라 하여도 <strong>다른 평갓값</strong>을 줄 수 있으며 이를 <strong>평갓값의 변동(variance)</strong>이라 한다.
  </li>
    <ul>
      <li>
        따라서 평갓값 행렬을 작성할 때 <strong>어떤 기간의 기호 데이터</strong>를 기반으로 평갓값을 얻었는가도 설계에 중요한 영향을 미친다.
      </li>
    </ul>
  <li>
    추천 시스템에는 다양한 편향이 존재한다.
  </li>
    <ul>
      <li>
        사용자는 <strong>자신이 좋아하는 것에만</strong> 평가를 남기는 경향이 분명하다.
      </li>
      <li>
        사용자에게 자주 노출되는 아이템은 이미 서비스 내에서 어느 정도 인기가 있는 아이템이기에 <strong>인기 편향</strong>이 발생한다.
      </li>
      <li>
        사용자의 <strong>개인 성향</strong>으로인해 후하게 주는 사용자가 있는가하면 박하게 주는 사용자 또한 있다.
      </li>
    </ul>
</ul>